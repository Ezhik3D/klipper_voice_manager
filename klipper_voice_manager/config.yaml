# Доступ к Klipper API
klipper:
  host: 127.0.0.1  # IP адрес для подключения к Klipper
  port: 7125  # Порт подключения Klipper
  websocket_path: /websocket  # Путь к WebSocket на сервере Klipper


websocket:
  ping_interval: 30  # Интервал отправки ping сообщений для поддержки соединения
  ping_timeout: 10  # Время ожидания pong ответа на ping
  close_timeout: 5  # Время ожидания закрытия WebSocket соединения
  send_timeout: 5  # Таймаут на отправку сообщений через WebSocket
  reconnect_delay: 5  # Задержка между попытками переподключения
  thread_join_timeout: 3  # Таймаут ожидания завершения потока WebSocket клиента
  run_forever_max_iterations: 60  # Максимальное количество итераций run_forever до перезапуска соединения


# Настройки звукового менеджера (pygame mixer)
sound_manager:
  # Общая громкость воспроизведения (0.0 = тишина, 1.0 = максимум)
  # Значение 0.7: компромисс между слышимостью и комфортом (не режет слух)
  volume: 0.7
  # Поддерживаются:
  # - относительные пути ("./sounds")
  # - абсолютные пути ("/home/user/audio")
  sounds_dir: "./sounds"

  # Временные рамки, когда разрешены звуковые оповещения
  # Используется в логике SoundManager для блокировки воспроизведения вне диапазона
  notification_hours:
    # Начало разрешённого периода (формат HH:MM)
    # 00:00 — начало суток
    start: "00:00"

    # Конец разрешённого периода (формат HH:MM)
    # 23:59 — последняя минута суток
    end: "23:59"

# Настройки уведомлений обдува вентилятора
fan:
  notifications:
    on_off_phrases: true  # Озвучивать включение/выключение
    percent_phrases: true  # Озвучивать проценты
    percent_change_threshold: 0  # Порог изменения скорости (в процентах)
    announce_interval_sec: 10  # Интервал между оповещениями (сек)

# Уведомления о парковке (G28)
g28_notifications:
  G28_X_START: true  # Уведомлять о начале парковки оси X
  G28_X_END: true  # Уведомлять о завершении парковки оси X
  G28_Y_START: true
  G28_Y_END: true
  G28_Z_START: true
  G28_Z_END: true
  G28_START: true  # Общая парковка - начало
  G28_END: true  # Общая парковка - завершение


# Уведомления bed mesh построения
bed_mesh_notifications:
  BED_MESH_START: true  # Начало построения сетки стола
  BED_MESH_END: true  # Завершение построения сетки стола
  BED_MESH_ADAPTIVE_START: true  # Начало построения адаптивной сетки
  BED_MESH_ADAPTIVE_END: true  # Завершение построения адаптивной сетки
  
  
# Конфигурация пользовательских оповещений (CustomNotifier)
# Каждый блок соответствует отдельному шаблону уведомления
custom_notifier:
  test1:                        # Уникальный ID шаблона (связан с custom_response.test1)
    true: true                  # Флаг активации: true — отправлять оповещение, false — игнорировать
    aliace: ['один']           # Алиас для озвучки
  test22:                        # Второй шаблон уведомления
    true: true                  # Активирован
    aliace: ['двадцать', 'два']            # Либо как в этом примере список алиасов для озвучивания при срабатывании шаблона


# Настройки уведомлений статуса печати
print_status:
  notifications:
    started: true  # Озвучивать начало печати
    completed: true  # Озвучивать завершение печати
    cancelled: true  # Озвучивать отмену печати
    paused: true  # Озвучивать паузу
    resumed: true  # Озвучивать возобновление

# Настройки уведомлений прогресса печати
progress:
  notifications:
    initial_estimate: true  # Озвучивать расчетное время печати в начале
    progress: true  # Озвучивать прогресс (%) во время печати
    elapsed_time: true  # Озвучивать прошедшее время печати
    remaining_time: true  # Озвучивать оставшееся время печати
    filament_usage: true  # Озвучивать расход филамента
  initial_estimate_source: "filename"  #Расчётное время печати из названия файла "filename" или расчёт клиппера "calculation"
  unit_style: "auto"  # Единицы расхода филамента режим меньше слов "compact" или режим "auto"
  notification_intervals: 1  # Интервалы уведомлений: "auto", число 1, или список [1, 5, 10, 50, 90, 100]
  filament_units: "мм"  # Единицы расхода филамента ("грамм" / "мм")
  filament_density: 1.24  # Плотность филамента г/см³ для режима filament_units: "грамм"
  filament_diameter: 1.75  # Диаметр филамента в мм для режима filament_units: "грамм"

# Конфигурация для поиска временных меток в именах файлов
time_pattern:
  # Основное регулярное выражение (латиница: d/h/m/s)
  # Находит блоки вида XdXhXmXs в любом месте имени файла
  regex: '(?:\d+d)?(?:\d+h)?(?:\d+m)?(?:\d+s)+'
  examples:
    - "file_1d2h30m.txt"
    - "project_2h45m.zip"
    - "backup_15m.7z"
    - "log_45s.log"
    - "data_1d2h.csv"
    - "report_3h45m10s.pdf"


  # Дополнительные варианты шаблонов (раскомментируйте нужный)

  # 1. Кириллица (д/ч/м/с)
  # regex: '(?:\d+д)?(?:\d+ч)?(?:\d+м)?(?:\d+с)+'
  # examples:
  #   - "файл_1д2ч30м.txt"
  #   - "проект_2ч45м.zip"
  #   - "копия_15м.7z"


  # 2. Смешанный вариант (латиница + кириллица)
  # regex: '(?:\d+(?:д|d))?(?:\d+(?:ч|h))?(?:\d+(?:м|m))?(?:\d+(?:с|s))+'
  # examples:
  #   - "file_1д2h.txt"
  #   - "project_2ч30m.zip"


  # 3. С пробелами между единицами (нестрогий формат)
  # regex: '(?:\d+d\s*)?(?:\d+h\s*)?(?:\d+m\s*)?(?:\d+s\s*)+'
  # examples:
  #   - "file_1d 2h.txt"
  #   - "project_2h  30m.zip"

  #   - "job 5s end.gcode"

  # 4. С валидацией значений (часы 0–23, минуты/секунды 0–59)
  # regex: '(?:\d+d)?(?:(?:[01]\d|2[0-3])h)?(?:[0-5]\dm)?(?:[0-5]\ds)+'
  # examples:
  #   - "file_23h59m.txt"  # корректно
  #   - "file_25h.log"     # не совпадёт (часы > 23)
  #   - "job_1h05m.gcode" # корректно
  #   - "test_60s.gcode"   # не совпадёт (секунды > 59)



# Настройки уведомлений температуры
temperature:
  enable_all_notifications: true  # Общий флаг включения уведомлений температуры
  bed:
    heating_off_alert: true  # Уведомлять об отключении нагрева стола
    heating_complete_alert: true  # Уведомлять о достижении целевой t для стола
    heating_complete_show_temp: true  # Показать температуру в уведомлении нагрева
    low_temperature_alert: true  # Уведомлять о низкой температуре стола
    low_temperature_need_temp: true  # Отображать требуемую t при низкой температуре
    high_temperature_alert: true  # Уведомлять о высокой температуре стола
    high_temperature_need_temp: true  # Отображать требуемую t при высокой температуре
    threshold_offset: 5  # Порог отклонения (в градусах) для стола
  extruder:
    heating_off_alert: true  # Аналогично для экструдера
    heating_complete_alert: true
    heating_complete_show_temp: true
    low_temperature_alert: true
    low_temperature_need_temp: true
    high_temperature_alert: true
    high_temperature_need_temp: true
    threshold_offset: 10  # Порог отклонения (в градусах) для экструдера

#Ответы M118 которые будут отловлены для обработки. Пример M118 G28 START будет отловлено и обработано как "парковка", M118 G28 X END будет озвучено как "парковка" "оси" "х" "завершена"
response:
    # Шаблоны для ParkingNotifier (парковка)
    parking:
      G28_START: ["G28 START"]
      G28_END: ["G28 END"]
      G28_X_START: ["G28 X START"]
      G28_X_END: ["G28 X END"]
      G28_Y_START: ["G28 Y START"]
      G28_Y_END: ["G28 Y END"]
      G28_Z_START: ["G28 Z START"]
      G28_Z_END: ["G28 Z END"]

    # Шаблоны для BedMeshNotifier (калибровка стола)
    bed_mesh:
      BED_MESH_START: ["BED_MESH START"]
      BED_MESH_END: ["BED_MESH END"]
      BED_MESH_ADAPTIVE_START: ["BED_MESH_ADAPTIVE START"]
      BED_MESH_ADAPTIVE_END: ["BED_MESH_ADAPTIVE END"]
    
    # Пользовательские шаблоны для модуля CustomNotifier
    # Каждый ключ — уникальный ID, связывающий response с настройками в custom_notifier
    custom_response:
      test1: ["test_response1"]   # При обнаружении "test_response1" активируется шаблон test1
      test22: ["test_response22"]   # При обнаружении "test_response22" активируется шаблон test22
  
#Алиасы и их файлы.  
sounds:
  ноль: "ноль.mp3"
  один: "один.mp3"
  однo: "одно.mp3"
  одна: "одна.mp3"
  два: "два.mp3"
  две: "две.mp3"
  три: "три.mp3"
  четыре: "четыре.mp3"
  пять: "пять.mp3"
  шесть: "шесть.mp3"
  семь: "семь.mp3"
  восемь: "восемь.mp3"
  девять: "девять.mp3"
  десять: "десять.mp3"
  одиннадцать: "одиннадцать.mp3"
  двенадцать: "двенадцать.mp3"
  тринадцать: "тринадцать.mp3"
  четырнадцать: "четырнадцать.mp3"
  пятнадцать: "пятнадцать.mp3"
  шестнадцать: "шестнадцать.mp3"
  семнадцать: "семнадцать.mp3"
  восемнадцать: "восемнадцать.mp3"
  девятнадцать: "девятнадцать.mp3"
  двадцать: "двадцать.mp3"
  тридцать: "тридцать.mp3"
  сорок: "сорок.mp3"
  пятьдесят: "пятьдесят.mp3"
  шестьдесят: "шестьдесят.mp3"
  семьдесят: "семьдесят.mp3"
  восемьдесят: "восемьдесят.mp3"
  девяносто: "девяносто.mp3"
  сто: "сто.mp3"
  двести: "двести.mp3"
  триста: "триста.mp3"
  четыреста: "четыреста.mp3"
  пятьсот: "пятьсот.mp3"
  шестьсот: "шестьсот.mp3"
  семьсот: "семьсот.mp3"
  восемьсот: "восемьсот.mp3"
  девятьсот: "девятьсот.mp3"
   
  #x: "икс.mp3"
  #y: "игрек.mp3"
  #z: "зет.mp3"
  #адаптивная: "адаптивная.mp3"
  #адаптивной: "адаптивной.mp3"
  #включен: "включен.mp3"
  #возобновление: "возобновление.mp3"
  #время: "время.mp3"
  #выключен: "выключен.mp3"
  #высокая: "высокая.mp3"
  #завершен: "завершен.mp3"
  #завершена: "завершена.mp3"
  меньше: "меньше.mp3"
  #нагрев: "нагрев.mp3"
  #начало: "начало.mp3"
  #низкая: "низкая.mp3"
  нужно: "нужно.mp3"
  обдув: "обдув.mp3"
  #оси: "оси.mp3"
  #отключен: "отключен.mp3"
  #отмена: "отмена.mp3"
  #отменена: "отменена.mp3"
  осталось: "осталось.mp3"
  парковка: "парковка.mp3"
  #пауза: "пауза.mp3"
  #печати: "печати.mp3"
  #печать: "печать.mp3"
  #построена: "построена.mp3"
  #построения: "построения.mp3"
  #прогресс: "прогресс.mp3"
  прошло: "прошло.mp3"
  #расход: "расход.mp3"
  #расчетное: "расчетное.mp3"
  #сетка: "сетка.mp3"
  #сетки: "сетки.mp3"
  #система: "система.mp3"
  #стола: "стола.mp3"
  температура: "температура.mp3"
  #филамента: "филамента.mp3"
  #экструдера: "экструдера.mp3"
  
  #Пример создания своего файла для воспроизведения фраз одним файлом.
  "['двадцать', 'один']": "двадцать_один.mp3"
  "['двадцать', 'два']": "двадцать_два.mp3"
  "['двадцать', 'три']": "двадцать_три.mp3"
  "['двадцать', 'четыре']": "двадцать_четыре.mp3"
  "['двадцать', 'пять']": "двадцать_пять.mp3"
  "['двадцать', 'шесть']": "двадцать_шесть.mp3"
  "['двадцать', 'семь']": "двадцать_семь.mp3"
  "['двадцать', 'восемь']": "двадцать_восемь.mp3"
  "['двадцать', 'девять']": "двадцать_девять.mp3"
  "['тридцать', 'один']": "тридцать_один.mp3"
  "['тридцать', 'два']": "тридцать_два.mp3"
  "['тридцать', 'три']": "тридцать_три.mp3"
  "['тридцать', 'четыре']": "тридцать_четыре.mp3"
  "['тридцать', 'пять']": "тридцать_пять.mp3"
  "['тридцать', 'шесть']": "тридцать_шесть.mp3"
  "['тридцать', 'семь']": "тридцать_семь.mp3"
  "['тридцать', 'восемь']": "тридцать_восемь.mp3"
  "['тридцать', 'девять']": "тридцать_девять.mp3"
  "['сорок', 'один']": "сорок_один.mp3"
  "['сорок', 'два']": "сорок_два.mp3"
  "['сорок', 'три']": "сорок_три.mp3"
  "['сорок', 'четыре']": "сорок_четыре.mp3"
  "['сорок', 'пять']": "сорок_пять.mp3"
  "['сорок', 'шесть']": "сорок_шесть.mp3"
  "['сорок', 'семь']": "сорок_семь.mp3"
  "['сорок', 'восемь']": "сорок_восемь.mp3"
  "['сорок', 'девять']": "сорок_девять.mp3"
  "['пятьдесят', 'один']": "пятьдесят_один.mp3"
  "['пятьдесят', 'два']": "пятьдесят_два.mp3"
  "['пятьдесят', 'три']": "пятьдесят_три.mp3"
  "['пятьдесят', 'четыре']": "пятьдесят_четыре.mp3"
  "['пятьдесят', 'пять']": "пятьдесят_пять.mp3"
  "['пятьдесят', 'шесть']": "пятьдесят_шесть.mp3"
  "['пятьдесят', 'семь']": "пятьдесят_семь.mp3"
  "['пятьдесят', 'восемь']": "пятьдесят_восемь.mp3"
  "['пятьдесят', 'девять']": "пятьдесят_девять.mp3"
  "['шестьдесят', 'один']": "шестьдесят_один.mp3"
  "['шестьдесят', 'два']": "шестьдесят_два.mp3"
  "['шестьдесят', 'три']": "шестьдесят_три.mp3"
  "['шестьдесят', 'четыре']": "шестьдесят_четыре.mp3"
  "['шестьдесят', 'пять']": "шестьдесят_пять.mp3"
  "['шестьдесят', 'шесть']": "шестьдесят_шесть.mp3"
  "['шестьдесят', 'семь']": "шестьдесят_семь.mp3"
  "['шестьдесят', 'восемь']": "шестьдесят_восемь.mp3"
  "['шестьдесят', 'девять']": "шестьдесят_девять.mp3"
  "['семьдесят', 'один']": "семьдесят_один.mp3"
  "['семьдесят', 'два']": "семьдесят_два.mp3"
  "['семьдесят', 'три']": "семьдесят_три.mp3"
  "['семьдесят', 'четыре']": "семьдесят_четыре.mp3"
  "['семьдесят', 'пять']": "семьдесят_пять.mp3"
  "['семьдесят', 'шесть']": "семьдесят_шесть.mp3"
  "['семьдесят', 'семь']": "семьдесят_семь.mp3"
  "['семьдесят', 'восемь']": "семьдесят_восемь.mp3"
  "['семьдесят', 'девять']": "семьдесят_девять.mp3"
  "['восемьдесят', 'один']": "восемьдесят_один.mp3"
  "['восемьдесят', 'два']": "восемьдесят_два.mp3"
  "['восемьдесят', 'три']": "восемьдесят_три.mp3"
  "['восемьдесят', 'четыре']": "восемьдесят_четыре.mp3"
  "['восемьдесят', 'пять']": "восемьдесят_пять.mp3"
  "['восемьдесят', 'шесть']": "восемьдесят_шесть.mp3"
  "['восемьдесят', 'семь']": "восемьдесят_семь.mp3"
  "['восемьдесят', 'восемь']": "восемьдесят_восемь.mp3"
  "['восемьдесят', 'девять']": "восемьдесят_девять.mp3"
  "['девяносто', 'один']": "девяносто_один.mp3"
  "['девяносто', 'два']": "девяносто_два.mp3"
  "['девяносто', 'три']": "девяносто_три.mp3"
  "['девяносто', 'четыре']": "девяносто_четыре.mp3"
  "['девяносто', 'пять']": "девяносто_пять.mp3"
  "['девяносто', 'шесть']": "девяносто_шесть.mp3"
  "['девяносто', 'семь']": "девяносто_семь.mp3"
  "['девяносто', 'восемь']": "девяносто_восемь.mp3"
  "['девяносто', 'девять']": "девяносто_девять.mp3"


  "['система', 'запущена']": "система_запущена.mp3"
  "['принтер', 'перезапущен']": "принтер_перезапущен.mp3"
  "['потеряна', 'связь', 'с', 'klipper']": "потеряна_связь_с_klipper.mp3"
  "['MCU', 'отключен']": "MCU_отключен.mp3"
  "['расчетное', 'время', 'печати']": "расчетное_время_печати.mp3"
  "['начало', 'печати']": "начало_печати.mp3"
  "['пауза', 'печати']": "пауза_печати.mp3"
  "['возобновление', 'печати']": "возобновление_печати.mp3"
  "['отмена', 'печати']": "отмена_печати.mp3"
  "['печать', 'завершена']": "печать_завершена.mp3"
  "['высокая', 'температура', 'стола']": "высокая_температура_стола.mp3"
  "['высокая', 'температура', 'экструдера']": "высокая_температура_экструдера.mp3"
  "['низкая', 'температура', 'стола']": "низкая_температура_стола.mp3"
  "['низкая', 'температура', 'экструдера']": "низкая_температура_экструдера.mp3"
  "['нагрев', 'стола', 'завершен']": "нагрев_стола_завершен.mp3"
  "['нагрев', 'стола', 'отключен']": "нагрев_стола_отключен.mp3"
  "['нагрев', 'экструдера', 'завершен']": "нагрев_экструдера_завершен.mp3"
  "['нагрев', 'экструдера', 'отключен']": "нагрев_экструдера_отключен.mp3"
  "['начало', 'построения', 'адаптивной', 'сетки']": "начало_построения_адаптивной_сетки.mp3"
  "['адаптивная', 'сетка', 'построена']": "адаптивная_сетка_построена.mp3"
  "['начало', 'построения', 'сетки']": "начало_построения_сетки.mp3"
  "['сетка', 'построена']": "сетка_построена.mp3"
  "['обдув', 'включен']": "обдув_включен.mp3"
  "['обдув', 'выключен']": "обдув_выключен.mp3"
  "['парковка', 'оси', 'x']": "парковка_оси_x.mp3"
  "['парковка', 'оси', 'y']": "парковка_оси_y.mp3"
  "['парковка', 'оси', 'z']": "парковка_оси_z.mp3"
  "['парковка', 'завершена']": "парковка_завершена.mp3"
  "['парковка', 'оси', 'x', 'завершена']": "парковка_завершена.mp3"
  "['парковка', 'оси', 'y', 'завершена']": "парковка_завершена.mp3"
  "['парковка', 'оси', 'z', 'завершена']": "парковка_завершена.mp3"
  "['прогресс', 'печати']": "прогресс_печати.mp3"
  "['расход', 'филамента']": "расход_филамента.mp3"
  
  
# Единицы измерения и склонения алиас и его файл.
  процент: "процент.mp3"
  процента: "процента.mp3"
  процентов: "процентов.mp3"
  
  градус: "градус.mp3"
  градуса: "градуса.mp3"
  градусов: "градусов.mp3"
 
  килограмм: "килограмм.mp3"
  килограмма: "килограмма.mp3"
  килограммов: "килограммов.mp3"
 
  грамм: "грамм.mp3"
  грамма: "грамма.mp3"
  граммов: "граммов.mp3"
  
  километр: "километр.mp3"
  километра: "километра.mp3"
  километров: "километров.mp3"  
  
  метр: "метр.mp3"
  метра: "метра.mp3"
  метров: "метров.mp3"

  сантиметр: "сантиметр.mp3"
  сантиметра: "сантиметра.mp3"
  сантиметров: "сантиметров.mp3"
  
  миллиметр: "миллиметр.mp3"
  миллиметра: "миллиметра.mp3"
  миллиметров: "миллиметров.mp3"
 
  день: "день.mp3"
  дней: "дней.mp3"
  дня: "дня.mp3"
 
  час: "час.mp3"
  часа: "часа.mp3"
  часов: "часов.mp3"

  минут: "минут.mp3"
  минута: "минута.mp3"
  минуты: "минуты.mp3"
  
  секунд: "секунд.mp3"
  секунда: "секунда.mp3"
  секунды: "секунды.mp3"
  
